(window.MIP=window.MIP||[]).push({name:"mip-baiyun-map",func:function(){define("mip-baiyun-map/mip-baiyun-map",["require","customElement"],function(e){function t(e){var t=e.dataset.ak,i=document.getElementsByTagName("body")[0],n=document.createElement("script");n.type="text/javascript",n.src="//api.map.baidu.com/getscript?v=2.0&ak="+t,i.appendChild(n)}function i(e){this.mapElement=e,this.imap,this.wayId=1;var t=this.mapElement.children[1].children[1];this.startElement=t.children[1].firstElementChild,this.endElement=t.children[2].firstElementChild,this.failElement=t.children[0],this.resultElement=t.children[3]}var n=e("customElement").create();return n.prototype.firstInviewCallback=function(){var e=this.element;t(e),window.addEventListener("load",function(){var t=new i(e);t.map(),e.dataset.way&&t.way()})},i.prototype.map=function(){var e=this.mapElement.firstElementChild.id||"allmap",t=this.mapElement.dataset.zoom||16,i=this.mapElement.dataset.x,n=this.mapElement.dataset.y;if(i&&n){this.imap=new BMap.Map(e);var a=new BMap.Point(i,n);this.imap.centerAndZoom(a,t);var o=new BMap.Marker(a);this.imap.addOverlay(o),o.setAnimation(BMAP_ANIMATION_BOUNCE)}},i.prototype.way=function(){var e=this;this.mapElement.addEventListener("click",function(t){var i=t.target;if("tip"===i.parentElement.id){e.wayId=Number(i.dataset.id);[].slice.call(i.parentElement.children).forEach(function(e){e.className=""}),i.className="cur"}else if("con"===i.parentElement.id)e.getRoute()})},i.prototype.getRoute=function(){var e=this.startElement.value,t=this.endElement.value;if(e&&t){this.failElement.className="fail",this.imap.clearOverlays();var i;if(1===this.wayId)i={renderOptions:{map:this.imap,panel:this.resultElement.id||"l-result"}};else if(2===this.wayId)this.resultElement.innerText="",i={renderOptions:{map:this.imap},policy:0};new BMap.TransitRoute(this.imap,i).search(e,t)}else this.failElement.className="fail show",this.failElement.innerText="起点或终点不能为空"},n}),define("mip-baiyun-map",["mip-baiyun-map/mip-baiyun-map"],function(e){return e}),function(){function e(e,t){e.registerMipElement("mip-baiyun-map",t,"mip-baiyun-map .map{width:100%;height:200px;overflow:hidden}mip-baiyun-map button{font-family:'Microsoft Yahei'}mip-baiyun-map .way{font-family:'Microsoft Yahei'}mip-baiyun-map .way .tip{height:30px;border-bottom:1px solid #ccc;line-height:30px}mip-baiyun-map .way .tip:before,mip-baiyun-map .way .tip:after{content:\" \";display:table}mip-baiyun-map .way .tip:after{clear:both}mip-baiyun-map .way .tip button{display:block;height:100%;float:left;padding:0 10px;border:1px solid #ccc;background:#EBEBEB;color:#666;position:relative;top:1px}mip-baiyun-map .way .tip button.cur{font-weight:bold;background:#fff;border-bottom:1px solid #fff}mip-baiyun-map .way .tip button:nth-child(1){border-right:0}mip-baiyun-map .way .con{border:1px solid #ccc;border-top:none;padding:5px}mip-baiyun-map .way .con .fail{display:none;color:#f00}mip-baiyun-map .way .con .show{display:block}mip-baiyun-map .way .con input{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;background-image:none;border-radius:4px;border:1px solid #bfcbd9;box-sizing:border-box;color:#1f2d3d;display:inline-block;font-size:inherit;height:36px;line-height:1;outline:none;padding:3px 10px;transition:border-color .2s cubic-bezier(.645, .045, .355, 1);width:80%}mip-baiyun-map .way .con div{line-height:50px}mip-baiyun-map .way .con .l-confirm{display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;background:#fff;border:1px solid #bfcbd9;color:#1f2d3d;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:none;margin:5px 0 0 0;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;padding:10px 15px;font-size:14px;border-radius:4px}mip-baiyun-map #travl-method{height:29px;border-bottom:1px solid #ccc;line-height:28px}mip-baiyun-map #travl-method a:first-child{border-left:1px solid #ccc}mip-baiyun-map #travl-method a.cur{font-weight:bold;color:black;position:relative;top:1px;background:white}mip-baiyun-map .tab-con{border:1px solid #ccc;border-top:none;padding:5px}mip-baiyun-map .tab-con input[type=text]{width:80%}")}if(window.MIP)require(["mip-baiyun-map"],function(t){e(window.MIP,t)});else require(["mip","mip-baiyun-map"],e)}()}});