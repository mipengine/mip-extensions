define("mip-mustache/sanitizer",["require","./html-sanitizer"],function(t){function e(t,e,i){if(0==e.indexOf("on")&&"on"!=e)return!1;if("style"==e)return!1;if(i)for(var n=i.toLowerCase().replace(/[\s,\u0000]+/g,""),o=0;o<a.length;o++)if(-1!=n.indexOf(a[o]))return!1;var r=u[t];if(r&&-1!=r.indexOf(e))return!1;var s=l[t];if(s){var c=s[e];if(c&&-1!=i.search(c))return!1}return!0}function i(t){function i(t){if(0===l)c.push(t)}var a=n.makeTagPolicy(),l=0,c=[];return n.makeSaxParser({startTag:function(t,c){if(!(l>0)){if(r[t])l++;else if(0!=t.indexOf("mip-")){var u=c.slice(0),p=a(t,c);if(!p)l++;c=p.attribs;for(var f=0;f<c.length;f+=2)if(-1!=d.indexOf(c[f]))c[f+1]=u[f+1];else if(0==c[f].search(s))c[f+1]=u[f+1]}if(!(l>0)){i("<"),i(t);for(var f=0;f<c.length;f+=2){var h=c[f],m=c[f+1];if(e(t,h,m)){if(i(" "),i(h),i('="'),m)i(n.escapeAttrib(m));i('"')}}i(">")}else if(o[t])l--}else if(!o[t])l++},endTag:function(t){if(l>0)return void l--;i("</"),i(t),i(">")},pcdata:i,rcdata:i,cdata:i})(t),c.join("")}var n=t("./html-sanitizer"),o={br:!0,col:!0,hr:!0,img:!0,input:!0,source:!0,track:!0,wbr:!0,area:!0,base:!0,command:!0,embed:!0,link:!0,meta:!0,param:!0},r={applet:!0,audio:!0,base:!0,embed:!0,form:!0,frame:!0,frameset:!0,iframe:!0,img:!0,link:!0,meta:!0,object:!0,script:!0,style:!0,svg:!0,template:!0,video:!0},s=/^data-/i,a=["javascript:","vbscript:","data:","<script","</script"],l={input:{type:/(?:image|file|password|button)/i}},c=["form","formaction","formmethod","formtarget","formnovalidate","formenctype"],u={input:c,textarea:c,select:c},d=["fallback","href","on","placeholder"];return i});