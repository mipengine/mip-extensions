(window.MIP=window.MIP||[]).push({name:"mip-wkfun-club",func:function(){define("mip-wkfun-club/mip-wkfun-club",["require","zepto","customElement"],function(require){var $=require("zepto"),customElem=require("customElement").create(),loadJs=function(t,e,i){var n=document.createElement("script");if(n.type="text/javascript",n.src=e,$(t).append(n),"function"!=typeof i)return!1;else n.onload=function(){i()}},appFun=function(url,pid,subject,subject_pid,qtagname,sta){function caina(param){var url="/ask/addition?method=caina&"+param;TT.get(url,function(result){var dataObj=eval("("+result+")");if(dataObj.result>0)if(alert(dataObj.msg),window.location.reload(),window.location.href.indexOf("?")>0)window.location.href=window.location.href+"&time1="+(new Date).getTime();else window.location.href=window.location.href+"?time="+(new Date).getTime();else alert(dataObj.msg)})}function setCookie(t,e){var i=new Date;i.setTime(i.getTime()+864e5),document.cookie=t+"="+escape(e)+";expires="+i.toGMTString()+";path=/"}function getCookie(t){var e,i=new RegExp("(^| )"+t+"=([^;]*)(;|$)");if(e=document.cookie.match(i))return e[2];else return null}function ajaxFunction(t){TT.get("/question/status?id="+t,function(e){callback(e,t)})}function callback(t,e){if(""!=t){var i=t+"/"+e+".htm?time="+(new Date).getTime(),n='<a  onclick="readtips()" href="'+i+'">提醒：您的提问有医生回复了，请点击查看</a>';document.getElementById("answertips").innerHTML=n,document.getElementById("currentid").innerHTML=e,document.getElementById("quests").style.display="block",clearTimeout(time)}else document.getElementById("answertips").innerHTML="",document.getElementById("quests").style.display="none"}function getCookie(t){var e,i=new RegExp("(^| )"+t+"=([^;]*)(;|$)");if(e=document.cookie.match(i))return unescape(e[2]);else return null}function showAskToMe(){for(var t=document.getElementsByTagName("div"),e=0;e<t.length;e++)if(t[e].innerHTML.indexOf("向他提问")>-1)t[e].style.display="block"}var url=url,pid=pid,subject=subject,subject_pid=subject_pid,qtagname=qtagname,sta=sta,Ajax=function(){var t=null;try{t=new XMLHttpRequest}catch(e){try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}}this.ajax=function(e){var i=e.type||"GET";if("GET"==(i=i.toUpperCase()))t.open("GET",e.url,!0);else if("POST"==i)t.open("POST",e.url,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.setRequestHeader("If-Modified-Since","0");else return!1;if(t.onreadystatechange=function(){if(4==t.readyState&&200==t.status)e.success(t.responseText)},"GET"==i)t.send(null);else if("POST"==i){var n="";for(var o in e.data)n+=o+"="+encodeURIComponent(e.data[o]),n+="&";n=n.substr(0,n.length-1),t.send(n)}},this.get=function(t,e){this.ajax({url:t,type:"GET",success:e})},this.post=function(t,e,i){this.ajax({url:t,type:"POST",data:e,success:i})}},TT=new Ajax,zw=0;$(".pump").on("click",function(){var rid=$(this).attr("rid"),paramStr=$(this).attr("paramStr");if(1!=zw){var tinput=document.getElementById("qsbox_"+rid),content=tinput.value.replace(/(^\s*)|(\s*$)/g,""),overlength=0,autocut=0,bindphone=$("#bindphone").val(),url="/ask/addition?method=taolun&fresh="+Math.random();if(""==content)return alert("回复内容不能为空!"),tinput.focus(),void(zw=0);if(content.length<5)return alert("回复内容不能少于5个字符!"),tinput.focus(),void(zw=0);if(content.length>100)if(alert("回复内容不能越过100个字符"),overlength=1,window.confirm("是否自动去掉多余的字符并提交？"))content=content.substr(0,99),autocut=1;if(1==overlength&&0==autocut)return tinput.focus(),void(zw=0);if("0"==bindphone)$(".tel-filter").show(),$(".tel-pop").show();var params=paramStr.split(",");if("1"==bindphone)TT.ajax({type:"POST",url:url,data:{rid:params.shift(),qid:params.shift(),quid:params.shift(),qrid:params.shift(),qtitle:params.shift(),content:content},datatype:"json",cache:!1,async:!1,success:function(result){var dataObj=eval("("+result+")");if(dataObj.result>0)alert(dataObj.msg),window.location.reload(!0),window.location.href=window.location.href+"?time="+(new Date).getTime(),zw=1;else zw=0,alert(dataObj.msg)}})}}),$(".pumpF").on("click",function(){var t=$(this).attr("rid"),e=$(this).attr("dvrid"),i=(document.getElementById(t),document.getElementById(e)),n=i.style;n.display="none"==n.display?"block":"none"});var time,cookiename="tipsid",readids=new Array;$("#imgcode").on("click",function(){$(this).attr("src",url+"/index.php?r=familyDoctor/captcha&time="+(new Date).getTime()),$("#tuverify").val("").focus()}),$(".reward").on("click",function(){document.body.addEventListener("touchstart",function(){}),$(".m-reward-confirm").css("top",($(window).height()-$(".m-reward-confirm").height())/2);var t=$(this).attr("docname"),e=$(this).attr("url");$(".rewarddocid").html("您确认将悬赏金给"+t+"吗？"),$(".rewardsure").attr("href",e),$(".tel-filter").show(),$(".m-reward-confirm").show()}),$(".m-reward-confirm .cancel,.tel-filter").on("click",function(){$(".m-reward-confirm").hide(),$(".tel-filter").hide()}),$(".focusblur").focus(function(){return $(".item-hd-so").hide(),!1}),$(".focusblur").blur(function(){return $(".item-hd-so").show(),!1}),$("#tuverify").blur(function(){if(""==$.trim($("#tuverify").val()))$(".tuyzma").show().html("请输入图形验证码");return!1}),$("#tuverify").focus(function(){return $(".tuyzma").hide(),!1});var h=$(document).height();if($(".tel-filter").css({height:h}),$(".tel-filter,.tel-pop").hasClass("none"))$("html").css("overflow","auto");else $("html").css("overflow","hidden");if($(".tel-filter,.pop-tips-ok").hasClass("none"))$("html").css("overflow","auto");else $("html").css("overflow","hidden");$(".cancelBtn").on("click",function(){$(".tel-filter").hide(),$(".tel-pop").hide()}),$(".tel-filter").click(function(){$(".tel-filter").hide(),$(".tel-pop").hide(),$(".pop-tips-ok").hide()});var countTimer=null,code_count=90,isSend=!0,regphone=/^1[34587]\d{9}$/,sendcodeurl="/ask/addition?method=bindphone&fresh="+Math.random();$("#popTelNum").blur(function(){var t=$.trim($("#popTelNum").val());if(!regphone.test(t))return $(".telError").show(),!1}),$("#popTelNum").focus(function(){return $(".telError").hide(),$(".tuyzma").hide(),!1}),$("#popVerify").bind("input propertychange",function(){return $(".yzmError").hide(),$(".tuyzma").hide(),!1}),$("#popYzmBtn").on("click",function(){var self=$(this),popTel=$.trim($("#popTelNum").val()),tuyzm=$.trim($("#tuverify").val());if(!regphone.test(popTel))return $(".telError").show(),!1;if(""==tuyzm)return $(".tuyzma").show().html("请输入正确的图形验证码"),!1;if(!isSend)return alert("正在获取中..."),!1;else return void $.ajax({url:url+"/index.php?r=familyDoctor/getmsg",data:{ask_code:1,order_code:tuyzm},type:"post",dataType:"json",success:function(msg){if(-1e3==msg)return changecode(),$("#tuverify").focus(),$(".tuyzma").show().html("请输入正确的图形验证码"),!1;if(1==msg)$(".tuyzma").hide(),$.ajax({type:"POST",url:sendcodeurl,data:{phone:popTel,getcode:1},datatype:"json",cache:!1,async:!1,success:function(data){var data=eval("("+data+")");if("10000"==data.code)countTimer=setInterval(function(){if(code_count<=1)clearInterval(countTimer),self.val("获取验证码"),self.css("background","#f6f6f6"),code_count=90,isSend=!0;else code_count--,isSend=!1,self.val(code_count+"秒重新获取"),self.css("background","#f6f6f6")},1e3);else if("31003"==data.code)$(".yzmError").html("请填写正确的手机号码"),$(".tuyzma").hide(),isSend=!0;else if("31004"==data.code)$(".yzmError").show().html("发送短信已达每日上限，请明天再试"),$(".tuyzma").hide(),isSend=!0;else if("31005"==data.code)$(".yzmError").show().html("120秒内禁止重复发送，请稍后重试"),$(".tuyzma").hide(),isSend=!0;else if("30000"==data.code)$(".yzmError").show().html("该IP当天发送超过最大数量"),$(".tuyzma").hide(),isSend=!0;else $(".yzmError").show().html("操作频繁，请稍后再试"),$(".tuyzma").hide(),isSend=!0}})},error:function(){return $(".tuyzma").show().html("当前网络繁忙，请稍后再试"),!1}})}),$("#telForm").on("submit",function(){var popTel=$.trim($("#popTelNum").val()),popVerify=$.trim($("#popVerify").val()),tuVerify=$.trim($("#tuverify").val());if(!regphone.test(popTel))return $(".telError").show(),!1;if(""==popTel&&""==popVerify)return $("#popTelNum").focus(),$("#popVerify").focus(),$(".telError").show().html("手机号不能为空"),$(".yzmError").show().html("验证码不能为空"),!1;if(""!==popTel&&""===tuVerify)return $("#popVerify").focus(),$(".tuyzma").show().html("请输入图形验证码"),!1;if(""!==popTel&&""===popVerify)return $("#popVerify").focus(),$(".yzmError").show().html("请输入验证码"),$(".tuyzma").hide(),!1;if(""!==popVerify&&isNaN(popVerify))return $("#popVerify").focus(),$(".yzmError").show().html("请输入正确的验证码"),$(".tuyzma").hide(),!1;var bindurl="/ask/addition?method=bindphone&fresh="+Math.random();if(""!==popTel){var submit=!0,showcount=3;return $.ajax({type:"POST",url:bindurl,data:{phone:popTel,getcode:2,sendcode:popVerify},datatype:"json",cache:!1,async:!1,success:function(data){var data=eval("("+data+")");if("10000"==data.code)return $(".tel-filter").hide(),$(".tel-pop").hide(),$("#bindphone").val("1"),countTimer=setInterval(function(){if(showcount<=1)clearInterval(countTimer),$("#tipsShow").hide(),showcount=3;else showcount--,$("#tipsShow").show()},1e3),submit=!1,!1;else if("31008"==data.code)return $("#popVerify").focus(),$(".yzmError").show().html("请输入正确的验证码"),$(".tuyzma").hide(),submit=!1,!1;else if("31015"==data.code)return $("#popVerify").focus(),$(".yzmError").show().html("该手机号已被其他帐号绑定"),$(".tuyzma").hide(),submit=!1,!1;else if("31014"==data.code)return $("#popVerify").focus(),$(".yzmError").show().html("该账户经绑定手机号，不可重复绑定"),$(".tuyzma").hide(),submit=!1,!1;else if("31020"==data.code)return $("#popVerify").focus(),$(".yzmError").show().html("用户信息为空，不可绑定"),$(".tuyzma").hide(),submit=!1,!1;else if("31016"==data.code)return $("#popVerify").focus(),$(".yzmError").show().html("绑定失败"),$(".tuyzma").hide(),submit=!1,!1;else return $("#popVerify").focus(),$(".yzmError").show().html("网络繁忙，请稍后重试"),$(".tuyzma").hide(),submit=!1,!1}}),!1}return!1}),$(".sendFens").on("click",function(){var t=$(this).attr("qid"),e=$(this).attr("rid"),i=$(this).attr("docid"),n=$(this).attr("ansertime"),o=getCookie("cookie_user_3g"),r="http://3g.club.xywy.com/index.php?r=QuestionEvaluate/index&ansertime="+n+"&pid="+o+"&qid="+t+"&rid="+e+"&docid="+i;window.location.href=r});var pid=pid,uid=getCookie("cookie_user_3g"),status=sta;if(uid&&uid==pid)document.getElementById("healthtips").style.display="block";if(uid&&uid==pid){for(var divs=document.getElementsByTagName("div"),i=0;i<divs.length;i++)if(divs[i].innerHTML.indexOf("cainapj")>-1||divs[i].innerHTML.indexOf("addF")>-1)divs[i].style.display="block"}else showAskToMe();if($("#soform").on("submit",function(){var t=$.trim($("#keysd").val());if("帮您寻医问药"==t)t="";else t=t;$(this).attr("method","post").attr("action","http://m.so.xywy.com/comse.php?src=3gclubso&keyword="+encodeURIComponent(t))}),[287,332].indexOf(subject_pid)>-1)(new Image).src="https://stat-z.xywy.com/e.png?pagevisit=pvwap_3g_wenkang_free_ask&time="+(new Date).getTime()+"time";else(new Image).src="https://stat-z.xywy.com/e.png?pagevisit=pvwap_3g_wenkang_article_button&time="+(new Date).getTime();var imgxx=new Image;imgxx.src="https://stat-y.xywy.com/z_test_pvuv.png?random"+Math.random();var cityname=_RET_IP.data.area.split("|");cityname=cityname[1];var alwaysShow="全国",alwaysShowoh="广东";!function(t,e,i){for(var n,o,r,s=function(t){if(!t)return!0;if(766==subject_pid){var e=t.split("#");if(t==alwaysShow){if(cityname.indexOf("北京")>=0)return!1;else if(cityname.indexOf("上海")>=0)return!1;else if(cityname.indexOf("深圳")>=0)return!1;else if(cityname.indexOf("广州")>=0)return!1;return!0}else if(t==alwaysShowoh)if(cityname.indexOf("深圳")>=0)return!1;else if(cityname.indexOf("广州")>=0)return!1}else{if(t==alwaysShow)return!0;var e=t.split("#")}for(var i=0;i<e.length;i++)if(0==cityname.indexOf(e[i]))return!0;return!1},a=document.querySelectorAll("."+t),l=0,c=a.length;l<c;l++)if(o=a[l],n=o.getAttribute(e))if(r=n.split(i),r[0]&&s(r[1])){if(o.href.indexOf("http")>-1)o.setAttribute("href",r[0]),o.innerHTML="向他咨询"}else if(o.href.indexOf("tel")>-1)o.style.display="none";a=document.querySelectorAll(".hospital");for(var l=0,c=a.length;l<c;l++)if(o=a[l],n=o.getAttribute(e))if(r=n.split(i),!s(r[1]))o.style.display="none"}("blueBtn","data","<--\x3e"),window.onload=function(){setTimeout(function(){window.scrollTo(0,1)},0)}};return customElem.prototype.build=function(){var t=this.element,e=$(t).attr("url"),i=$(t).attr("pid"),n=$(t).attr("subject"),o=$(t).attr("subject_pid"),r=$(t).attr("qtagname"),s=$(t).attr("sta");loadJs(t,"https://page.xywy.com/get_ip",function(){appFun(e,i,n,o,r,s)})},customElem}),define("mip-wkfun-club",["mip-wkfun-club/mip-wkfun-club"],function(t){return t}),function(){function t(t,e){t.registerMipElement("mip-wkfun-club",e)}if(window.MIP)require(["mip-wkfun-club"],function(e){t(window.MIP,e)});else require(["mip","mip-wkfun-club"],t)}()}});