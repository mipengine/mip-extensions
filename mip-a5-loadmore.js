(window.MIP=window.MIP||[]).push({name:"mip-a5-loadmore",func:function(){define("mip-a5-loadmore/mip-a5-loadmore",["require","zepto","customElement"],function(e){function t(e){d=!0,c.html(r.status.loading);var t=i(e).find(r.moreList);i.ajax({url:r.url,method:"GET",data:r.pageParam+"="+s,success:function(e){var n=i(e).find(r.moreList).children();if(n.length>0)t.append(n),c.html(r.status.init),s++,d=!1;else c.html(r.status.ending),d=!1},error:function(e){c.html(r.status.error),d=!1}})}function n(e){return"SCRIPT"===e.tagName&&e.getAttribute("type")&&"APPLICATION/JSON"===e.getAttribute("type").toUpperCase()}var i=e("zepto"),a=e("customElement").create(),o={url:"#",page:2,btn:".loadBtn",moreList:".moreList",status:{init:"<i></i>加载更多",loading:"<i></i>加载中",ending:"<i></i>没有了",error:"<i></i>网络错误"},scrollPage:-1,pageParam:"page"},r={},c="",s=2,d=!1;return a.prototype.build=function(){var e=this.element,a=e.querySelector("script")||null;if(null!==a)if(n(a)){var l=a.textContent.toString();try{r=JSON.parse(l)}catch(e){return console.error("error options",l),!1}}else return console.error("error options"),!1;r=i.extend(o,r),s=r.page,c=i(r.btn),c.html(r.status.init),c.click(function(){if(d)return!1;t(e)});var u=parseInt(r.scrollPage,0);if(u>=0){var f=i(window).height();i(window).on("scroll",function(){var n=i(this).scrollTop();if(i(document).height()-f-n-50<0&&!1===d&&(0===u||s<r.page+u))t(e)})}},a}),define("mip-a5-loadmore",["mip-a5-loadmore/mip-a5-loadmore"],function(e){return e}),function(){function e(e,t){e.registerMipElement("mip-a5-loadmore",t)}if(window.MIP)require(["mip-a5-loadmore"],function(t){e(window.MIP,t)});else require(["mip","mip-a5-loadmore"],e)}()}});